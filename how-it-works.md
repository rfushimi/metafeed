
# metafeed の仕組み

## metafeed の埋め込み方

- いちばん簡単な方法は、podcastの説明文に、metafeedのURLを埋め込むことです。

> [metafeed:metafeed.info/kennaka]

- metafeed hubのURLを、Webサイト欄に記載することもできます。metafeed hostingは、リンクを開いたリスナーをあなたのWebサイトにリダイレクトします。

> http://metafeed.info/kennaka?redirectTo=http://kennaka.com

- あなたのWebサイトのURLを使いながら、WebサイトのURLにmetafeedのURLを埋め込む方法もあります。

> http://kennaka.com/#metafeed=metafeed.info

- あなたのWebサイトがmetafeedも配信している場合は、単にあなたのWebサイトを記載するだけでOKです。

> http://kennaka.com

これらは、Podcastプレイヤーに対して、このPodcastがmetafeedに対応していることを示すものです。対応していないプレイヤーでは単に無視されるだけで、metafeedのサーバに何か情報が送られることもありません。

## metafeed 対応プレイヤーの仕組み

- metafeedに対応するPodcastアプリ (現状は [metaplayer](player.md) だけが対応しています) は、RSSから上記のいずれかの方法でmetafeed URLを取得し、再生状況に応じてタグに対応したお知らせや通知を送ります。

### 音楽コンテンツの再生

- 対応プレイヤーで聴いているリスナーは、音楽が埋め込まれた箇所で通知を受け取ります。通知を開くことで、対応している音楽アプリで、音楽を聴くことができます。リスナーは、好きなアプリを選んだり、これを自動的に行うよう設定できます。
- 再生が始まり、指定した時間が経つと、対応プレイヤーはPodcastの再生に戻るよう通知を送ります。Music + Talkと異なり、自動でPodcastの再生に戻る機能はありませんので、番組の末尾にコンテンツを埋め込むように構成することをおすすめします。
- 対応していないプレイヤーで聴いているリスナー向けに、エピソード内で「音楽を聴きたい方は、概要欄のリンクからぜひ聴いてみてください」もしくは、「metafeed対応のアプリで聴いてみてください」などと促すことができます。

## metafeed の仕組みはオープンです

metafeedの仕様は、podcastの仕様と同じくオープンです。

metafeedの仕様はシンプルです。metafeedのサーバーは、1つのメタデータ(テキスト)ファイルを配信するWebサーバーであり、Podcastの配信者なら誰でも自由に作ったり乗り換えたりできます。
クライアントはmetafeedを解釈して、埋め込まれた情報を表示する仕組みを実装するだけです。また、音楽の再生には別のアプリを利用し、metadataの読み込みを対応アプリで行うこともできます。

metafeedはリスナーの望まない形で使うことは難しいように設計されています。たとえば強制的に広告を見せることはできませんし、課金を強要することもできません。
metafeedは、既存のRSSの仕組み以上にユーザの情報を収集する必要もありません。もしそのような使い方をするプレイヤーがいれば、リスナーは、他のmetafeed対応プレイヤーを探すか、自分でビルドできます。

metafeedは、現状のRSSの仕組みの中に実装可能なアイデアです。ただし、Anchor, Libsynなどの配信プラットフォームはRSSへのメタデータの埋め込みには対応していません。
そのため、説明文や、WebサイトのURLなど、既存の仕組みでも編集可能な箇所に、metafeedのURLを埋め込むことによって、RSSを拡張するという手段を取っています。
将来的にもしmetafeedが広まって、AnchorやLibsynなどのサービスがmetafeedの埋め込みを許容したい場合には、metafeedの内容をRSSの中にタグを使って埋め込むことで、metafeedの取得のために必要な通信を減らすこともできます。
